<!DOCTYPE html>
<html lang="en">
<head>
  <link rel="stylesheet" href="styleFinal.css">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>List of Database Files</title>
</head>

<body>
<header>
  <nav class="topnav">
    <a href="/">App</a>
    <a href="/database.html">Database</a>
    <a href="/errorForRandomPage">Error</a>
    <a href="https://github.com/David-Szczepanik/Node.js-API-File_Hashing">Github</a>
    <img src="images/sun.png" id="icon" onclick="themeToggle()" alt="dark mode icon">
  </nav>
</header>
<main>
  <h1>Database files</h1>

  <table id="fileTable">
    <thead>
    <tr>
      <th>File Name</th>
      <th>File Size (bytes)</th>
      <th>File Hash</th>
    </tr>
    </thead>
    <tbody id="fileList"></tbody>
  </table>
</main>
<script>
  document.addEventListener('DOMContentLoaded', async () => {
    try {
      // Fetch data from the server
      const response = await fetch('/databaseJSON');
      const files = await response.json();

      const fileListElement = document.getElementById('fileList');

      // Generate table rows and cells and append them to <tbody> element
      files.forEach(file => {
        const row = fileListElement.insertRow();
        const cell1 = row.insertCell(0);
        const cell2 = row.insertCell(1);
        const cell3 = row.insertCell(2);

        cell1.textContent = file.fileName;
        cell2.textContent = file.fileSize;
        cell3.textContent = file.fileHash;
      });
    } catch (error) {
      console.error(error);
    }
  });

</script>
<script src="dark-mode.js"></script>
</body>
</html>
